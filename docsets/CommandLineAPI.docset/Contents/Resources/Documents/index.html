<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CommandLineAPI  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="CommandLineAPI  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">CommandLineAPI 0.2.0 Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/Hejki/CommandLineAPI"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">CommandLineAPI Reference</a>
        <img id="carat" src="img/carat.png" />
        CommandLineAPI  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="CommandLineAPI.html">CommandLineAPI</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/CLI.html">CLI</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/StringStyle.html">– StringStyle</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/AskOption.html">– AskOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/CommandRunResult.html">– CommandRunResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/Command.html">– Command</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/CommandExecutor.html">– CommandExecutor</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/Environment.html">– Environment</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CLI/Arguments.html">– Arguments</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path.html">Path</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path/Attributes.html">– Attributes</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path/ChildSequence.html">– ChildSequence</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path/EntryType.html">– EntryType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Path/Permissions.html">– Permissions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Bool.html">Bool</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Bundle.html">Bundle</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Data.html">Data</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Double.html">Double</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Float.html">Float</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Int.html">Int</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String/StringInterpolation.html">– StringInterpolation</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/StringProtocol.html">StringProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Functions.html">Other Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Functions.html#/s:14CommandLineAPI2peoiyyAA4PathVz_xSgtSyRzlF">+=(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/ExpressibleByStringArgument.html">ExpressibleByStringArgument</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/PromptHandler.html">PromptHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='commandlineapi' class='heading'>CommandLineAPI</h1>

<p><img src="https://img.shields.io/badge/Swift-5.1-orange.svg?logo=swift?style=flat" alt="badge-swift"> <img src="https://img.shields.io/badge/platform-mac-lightgray.svg?style=flat" alt="badge-platforms"> <a href="https://swift.org/package-manager"><img src="https://img.shields.io/badge/spm-compatible-brightgreen.svg?style=flat" alt="badge-spm"></a> <a href="https://travis-ci.com/Hejki/CommandLineAPI"><img src="https://travis-ci.com/Hejki/CommandLineAPI.svg" alt="badge-ci"></a> <a href="https://hejki.github.io/CommandLineAPI"><img src="https://hejki.github.io/CommandLineAPI/badge.svg?sanitize=true" alt="badge-docs"></a> <a href="https://github.com/Hejki/CommandLineAPI/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-black.svg?style=flat" alt="badge-licence"></a></p>

<p>The library that can help you create a command line applications. This library is inspired by <a href="https://github.com/nsomar/Swiftline">Swiftline</a> and <a href="https://github.com/mxcl/Path.swift">Path.swift</a>.</p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li><a href="#path">Path struct</a> for handling files and directories.</li>
<li><a href="#string-styles">String styles</a> which helps styling the strings before print them to the terminal.</li>
<li><a href="#prompt-functions">Prompt functions</a> for process input and output in the terminal.</li>
<li><a href="#run">Functions for run</a> an external commands and read its standard output.</li>
<li>Read and write <a href="#env">environment</a> variables.</li>
<li>Parse command line <a href="#args">arguments</a>.</li>
</ul>
<h2 id='path' class='heading'>Path</h2>

<p>Path is a simple way for accessing, reading and writing files and directories.</p>

<p>Crate a Path instance:</p>
<pre class="highlight swift"><code><span class="c1">// Path are always absolute</span>
<span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/Users/hejki/tools/README"</span><span class="p">)</span> <span class="c1">// absolute path from root /</span>
<span class="k">let</span> <span class="nv">pathFromURL</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Path</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">fileURLWithPath</span><span class="p">:</span> <span class="s">"/Users/hejki/tools/README"</span><span class="p">))</span>

<span class="k">try</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"~/Downloads"</span><span class="p">)</span> <span class="c1">// path relative to current user home</span>
<span class="k">try</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"~tom/Downloads"</span><span class="p">)</span> <span class="c1">// path relative to another user home</span>
<span class="k">try</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"Package.swift"</span><span class="p">)</span> <span class="c1">// path relative to current working directory</span>
<span class="kt">Path</span><span class="p">(</span><span class="s">".stool/config.yaml"</span><span class="p">,</span> <span class="nv">relativeTo</span><span class="p">:</span> <span class="o">.</span><span class="n">home</span><span class="p">)</span> <span class="c1">// relative path to another path</span>
</code></pre>

<p>Shortcut paths for system directories:</p>
<pre class="highlight swift"><code><span class="kt">Path</span><span class="o">.</span><span class="n">root</span>      <span class="c1">// File system root</span>
<span class="kt">Path</span><span class="o">.</span><span class="n">home</span>      <span class="c1">// Current user's home</span>
<span class="kt">Path</span><span class="o">.</span><span class="n">current</span>   <span class="c1">// Current working directory</span>
<span class="kt">Path</span><span class="o">.</span><span class="n">temporary</span> <span class="c1">// Path to temporary directory</span>
</code></pre>

<p>Path components and path chaining:</p>
<pre class="highlight swift"><code><span class="c1">// Paths can be joined with appending function or + operator</span>
<span class="k">let</span> <span class="nv">readme</span> <span class="o">=</span> <span class="kt">Path</span><span class="o">.</span><span class="n">home</span><span class="o">.</span><span class="nf">appending</span><span class="p">(</span><span class="s">"tools"</span><span class="p">)</span> <span class="o">+</span> <span class="s">"README.md"</span>

<span class="n">readme</span><span class="o">.</span><span class="n">url</span> <span class="c1">// URL representation</span>
<span class="n">readme</span><span class="o">.</span><span class="n">path</span> <span class="c1">// Absolute path string</span>
<span class="n">readme</span><span class="o">.</span><span class="n">pathComponents</span> <span class="c1">// ["Users", "hejki", "tools", "README.md"]</span>
<span class="n">readme</span><span class="o">.</span><span class="kd">extension</span> <span class="c1">// "md"</span>
<span class="n">readme</span><span class="o">.</span><span class="n">basename</span> <span class="c1">// "README.md"</span>
<span class="n">readme</span><span class="o">.</span><span class="n">basenameWithoutExtension</span> <span class="c1">// "README"</span>
<span class="n">readme</span><span class="o">.</span><span class="n">parent</span> <span class="c1">// Path("/Users/hejki/tools")</span>
<span class="n">readme</span><span class="o">.</span><span class="nf">path</span><span class="p">(</span><span class="nv">relativeTo</span><span class="p">:</span> <span class="kt">Path</span><span class="o">.</span><span class="n">home</span> <span class="o">+</span> <span class="s">"Downloads"</span><span class="p">)</span> <span class="c1">// "../tools/README.md"</span>
</code></pre>

<p>Iterate over the directory content:</p>
<pre class="highlight swift"><code><span class="c1">// Sequence with a shallow search of the specified directory, without hidden files</span>
<span class="k">for</span> <span class="n">path</span> <span class="k">in</span> <span class="kt">Path</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">children</span> <span class="p">{</span> 
    <span class="nf">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Use recursive to deep search and/or includingHidden for hidden files</span>
<span class="kt">Path</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">recursive</span><span class="o">.</span><span class="n">includingHidden</span><span class="o">.</span><span class="n">forEach</span> <span class="p">{</span> <span class="nf">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">}</span>
</code></pre>

<p>Access to file and directory attributes:</p>
<pre class="highlight swift"><code><span class="n">readme</span><span class="o">.</span><span class="n">exist</span> <span class="c1">// `true` if this path represents an actual filesystem entry</span>
<span class="n">readme</span><span class="o">.</span><span class="n">type</span> <span class="c1">// The type of filesystem entry. Can be .file, .directory, .symlink and .pipe</span>

<span class="k">let</span> <span class="nv">attributes</span> <span class="o">=</span> <span class="n">readme</span><span class="o">.</span><span class="n">attributes</span>

<span class="n">attributes</span><span class="o">.</span><span class="n">creationDate</span>     <span class="c1">// item's creation date</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">modificationDate</span> <span class="c1">// item's last modify date</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">extensionHidden</span>  <span class="c1">// item's extension is hidden</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">userName</span>         <span class="c1">// item's owner user name</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">groupName</span>        <span class="c1">// item's owner group name</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">permissions</span>      <span class="c1">// item's permissions</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">size</span>             <span class="c1">// item's size in bytes (read-only)</span>
</code></pre>

<p>Create, copy, move and delete filesystem items:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">downloads</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"Downloads/stool"</span><span class="p">,</span> <span class="nv">relativeTo</span><span class="p">:</span> <span class="o">.</span><span class="n">home</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">documents</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Path</span><span class="o">.</span><span class="n">home</span><span class="o">.</span><span class="nf">createDirectory</span><span class="p">(</span><span class="s">"Projects"</span><span class="p">)</span> <span class="c1">// Creates a directory</span>

<span class="k">try</span> <span class="n">downloads</span><span class="o">.</span><span class="nf">touch</span><span class="p">()</span> <span class="c1">// Creates an empty file, or updates its modification time</span>
    <span class="o">.</span><span class="nf">copy</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">documents</span><span class="p">,</span> <span class="nv">overwrite</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">// Copy that file to documents directory</span>
    <span class="o">.</span><span class="nf">rename</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="s">"stool.todo"</span><span class="p">)</span> <span class="c1">// Rename that file</span>
<span class="k">try</span> <span class="n">downloads</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="nv">useTrash</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span> <span class="c1">// Delete original file, or move to trash</span>
</code></pre>

<p>Read and write filesystem item&rsquo;s content:</p>
<pre class="highlight swift"><code><span class="c1">// Read content functions</span>
<span class="k">let</span> <span class="nv">string</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">readme</span><span class="p">)</span> <span class="c1">// File content as String</span>
<span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">readme</span><span class="p">)</span> <span class="c1">// File content as Data</span>

<span class="c1">// Write functions on Data and String</span>
<span class="k">try</span> <span class="s">"Hi!"</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="nv">append</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">atomically</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span>
<span class="k">try</span> <span class="kt">Data</span><span class="p">()</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="nv">append</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">atomically</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>

<span class="c1">// Write functions on Path</span>
<span class="k">try</span> <span class="n">path</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">text</span><span class="p">:</span> <span class="s">"README"</span><span class="p">,</span> <span class="nv">append</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span>
<span class="k">try</span> <span class="n">path</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="kt">Data</span><span class="p">(),</span> <span class="nv">append</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
</code></pre>
<h2 id='string-styles' class='heading'>String Styles</h2>

<p>String styles helps styling the strings before printing them to the terminal. You can change the text color, the text background color and the text style. String styles works in string interpolation and for implementations of <code>StringProtocol</code>.</p>

<p>Change style of string part using string interpolation extension:</p>
<pre class="highlight swift"><code><span class="nf">print</span><span class="p">(</span><span class="s">"Result is </span><span class="se">\(</span><span class="n">result</span><span class="o">.</span><span class="n">exitStatus</span><span class="p">,</span> <span class="nv">styled</span><span class="p">:</span> <span class="o">.</span><span class="n">fgRed</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="s">"Result is </span><span class="se">\(</span><span class="n">result</span><span class="o">.</span><span class="n">exitStatus</span><span class="p">,</span> <span class="nv">styled</span><span class="p">:</span> <span class="o">.</span><span class="n">fgRed</span><span class="p">,</span> <span class="o">.</span><span class="n">italic</span><span class="se">)</span><span class="s">"</span><span class="p">)</span> <span class="c1">// multiple styles at once</span>
</code></pre>

<p>The types that conforming <code>StringProtocol</code> can use styles directly:</p>
<pre class="highlight swift"><code><span class="nf">print</span><span class="p">(</span><span class="s">"Init..."</span><span class="o">.</span><span class="nf">styled</span><span class="p">(</span><span class="o">.</span><span class="n">bgMagenta</span><span class="p">,</span> <span class="o">.</span><span class="n">bold</span><span class="p">,</span> <span class="o">.</span><span class="nf">fg</span><span class="p">(</span><span class="nv">r</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="nv">g</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="nv">b</span><span class="p">:</span> <span class="mi">0</span><span class="p">)))</span>
</code></pre>
<h2 id='prompt-functions' class='heading'>Prompt Functions</h2>
<h3 id='print' class='heading'>Print</h3>

<p>Functions for print strings to standard output/error or for read input from standard input.</p>
<pre class="highlight swift"><code><span class="kt">CLI</span><span class="o">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Print text to console without </span><span class="se">\n</span><span class="s"> at end."</span><span class="p">)</span>
<span class="kt">CLI</span><span class="o">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Print text to console with terminating newline."</span><span class="p">)</span>
<span class="kt">CLI</span><span class="o">.</span><span class="nf">print</span><span class="p">(</span><span class="nv">error</span><span class="p">:</span> <span class="s">"Print error to console without </span><span class="se">\n</span><span class="s"> at end."</span><span class="p">)</span>
<span class="kt">CLI</span><span class="o">.</span><span class="nf">println</span><span class="p">(</span><span class="nv">error</span><span class="p">:</span> <span class="s">"Print error to console with terminating newline."</span><span class="p">)</span>

<span class="c1">// read user input</span>
<span class="k">let</span> <span class="nv">fileName</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre>

<p>Handler for this functions can be changed by setting <code><a href="Enums/CLI.html#/s:14CommandLineAPI3CLIO6promptAA13PromptHandler_pvpZ">CLI.prompt</a></code> variable. This can be handle for tests, for example:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">TestPromptHandler</span><span class="p">:</span> <span class="kt">PromptHandler</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">print</span><span class="p">(</span><span class="n">_</span> <span class="nv">string</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="s">"test print"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="o">...</span>
<span class="p">}</span>

<span class="kt">CLI</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="kt">TestPromptHandler</span><span class="p">()</span>
</code></pre>
<h3 id='ask' class='heading'>Ask</h3>

<p>Ask presents the user with a prompt and waits for the user input.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">toolName</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Enter tool name: "</span><span class="p">)</span>
</code></pre>

<p>Types that confirms ExpressibleByStringArgument can be returned from ask.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">timeout</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Enter timeout: "</span><span class="p">,</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">Int</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>

<span class="c1">// If user enters something that cannot be converted to Int, a new prompt is displayed,</span>
<span class="c1">// this prompt will keep displaying until the user enters an Int:</span>
<span class="c1">// $ Enter timeout: No</span>
<span class="c1">// $ Please enter a valid Int.</span>
<span class="c1">// $ 2.3</span>
<span class="c1">// $ Please enter a valid Int.</span>
<span class="c1">// $ 2</span>
</code></pre>

<p>Prompt can be customized througt ask options.</p>
<pre class="highlight swift"><code><span class="c1">// to specify default value which is used if the user only press Enter key</span>
<span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Output path [/tmp]?</span><span class="se">\n</span><span class="s"> "</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="s">"/tmp"</span><span class="p">))</span>

<span class="c1">// use .confirm() if you require value confirmation</span>
<span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Remove file? "</span><span class="p">,</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">Bool</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="nf">confirm</span><span class="p">())</span>
<span class="o">.</span><span class="nf">confirm</span><span class="p">(</span><span class="nv">message</span><span class="p">:</span> <span class="s">"Use this value?</span><span class="se">\n</span><span class="s"> "</span><span class="p">)</span> <span class="c1">// to specify custom message</span>
<span class="o">.</span><span class="nf">confirm</span><span class="p">(</span><span class="nv">block</span><span class="p">:</span> <span class="p">{</span> <span class="s">"Use </span><span class="se">\(</span><span class="nv">$0</span><span class="se">)</span><span class="s"> value? "</span> <span class="p">})</span> <span class="c1">// to specify custom message with entered value</span>

<span class="c1">// add some .validator() to validate an entered value</span>
<span class="k">let</span> <span class="nv">positive</span> <span class="o">=</span> <span class="kt">AskOption</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;.</span><span class="nf">validator</span><span class="p">(</span><span class="s">"Value must be positive."</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$0</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>
<span class="k">let</span> <span class="nv">maxVal</span> <span class="o">=</span> <span class="kt">AskOption</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;.</span><span class="nf">validator</span><span class="p">(</span><span class="s">"Max value is 100."</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$0</span> <span class="o">&lt;=</span> <span class="mi">100</span> <span class="p">}</span>

<span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Requested value: "</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">positive</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">)</span>

<span class="c1">// you can use some predefined validators</span>
<span class="o">.</span><span class="nf">notEmptyValidator</span><span class="p">()</span> <span class="c1">// for Strings</span>
<span class="o">.</span><span class="nf">rangeValidator</span><span class="p">(</span><span class="mi">0</span><span class="o">...</span><span class="mi">5</span><span class="p">)</span> <span class="c1">// for Comparable instances</span>

<span class="c1">// options can be combined together</span>
<span class="k">let</span> <span class="nv">i</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="s">"Value: "</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="o">.</span><span class="nf">confirm</span><span class="p">(),</span> <span class="n">positive</span><span class="p">)</span>
</code></pre>
<h3 id='choose' class='heading'>Choose</h3>

<p>Choose is used to prompt the user to select an item between several possible items.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">choose</span><span class="p">(</span><span class="s">"Select user: "</span><span class="p">,</span> <span class="nv">choices</span><span class="p">:</span> <span class="p">[</span><span class="s">"hejki"</span><span class="p">,</span> <span class="s">"guest"</span><span class="p">])</span>

<span class="c1">// This will print:</span>
<span class="c1">// $ 1. hejki</span>
<span class="c1">// $ 2. guest</span>
<span class="c1">// $ Select user: </span>
</code></pre>

<p>The user must choose one item from the list by entering its number. If the user enters a wrong input, a prompt will keep showing until the user makes a correct choice.</p>

<p>Choices can be supplied with dictionary, to display a different value than you later get as a result.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">difficulty</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">choose</span><span class="p">(</span><span class="s">"Select difficulty: "</span><span class="p">,</span> <span class="nv">choices</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"Easy"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"Hard"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"Extreme"</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">])</span>
</code></pre>
<h2 id='run' class='heading'>Run</h2>

<p>Run provides a quick way to run an external command and read its standard/error output and exit status.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="s">"ls -al"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exitStatus</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</code></pre>

<p>Each command can be run with one of available executors. The executor defines how to run command.</p>

<ul>
<li><code>.default</code> executor is dedicated to non-interactive, short running tasks. This executor runs the command and consumes all outputs. Command outputs will be available after task execution in task result. This executor is default for <code>CLI.run</code> functions.</li>
<li><code>.dummy</code> executor that only prints command to <code>CLI.println</code>. You can specify returned stdout, stderr strings and exitStatus.</li>
<li><code>.interactive</code> executor runs command with redirected standard/error outputs to system outputs. This executor can handle user&rsquo;s inputs from system standard input. The command output will not be recorded.</li>
</ul>

<p>For more complex executions use <code>Command</code> type directly:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">command</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="kt">Command</span><span class="p">(</span>
    <span class="p">[</span><span class="s">"swift"</span><span class="p">,</span> <span class="s">"build"</span><span class="p">],</span>
    <span class="nv">executor</span><span class="p">:</span> <span class="o">.</span><span class="n">interactive</span><span class="p">,</span>
    <span class="nv">workingDirectory</span><span class="p">:</span> <span class="kt">Path</span><span class="o">.</span><span class="n">home</span> <span class="o">+</span> <span class="s">"/Projects/CommandLineAPI"</span><span class="p">,</span>
    <span class="nv">environment</span><span class="p">:</span> <span class="p">[</span><span class="s">"PATH"</span><span class="p">:</span> <span class="s">"/usr/bin/"</span><span class="p">]</span>
<span class="p">)</span>

<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="nf">execute</span><span class="p">()</span>
</code></pre>

<p>Command results can be chained together by using pipes:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">encode</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="s">"echo"</span><span class="p">,</span> <span class="s">"-n"</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span><span class="o">.</span><span class="nf">pipe</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="s">"base64"</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
<span class="k">let</span> <span class="nv">decode</span> <span class="o">=</span> <span class="kt">CLI</span><span class="o">.</span><span class="nf">echo</span><span class="p">(</span><span class="s">"YmFuYW5h"</span><span class="p">)</span> <span class="o">|</span> <span class="s">"base64 -D"</span>
</code></pre>
<h2 id='env' class='heading'>Env</h2>

<p>Read and write the environment variables passed to the script:</p>
<pre class="highlight swift"><code><span class="c1">// Array with all envirnoment keys</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">keys</span>

<span class="c1">// Get environment variable</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s">"PATH"</span><span class="p">]</span>

<span class="c1">// Set environment variable</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s">"PATH"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"~/bin"</span>
</code></pre>
<h2 id='args' class='heading'>Args</h2>

<p>Returns the arguments passed to the script.</p>
<pre class="highlight swift"><code><span class="c1">// For example when calling `stool init -s default -q -- tool`</span>
<span class="c1">// CLI.args contains following results</span>

<span class="kt">CLI</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">all</span> <span class="o">==</span> <span class="p">[</span><span class="s">"stool"</span><span class="p">,</span> <span class="s">"init"</span><span class="p">,</span> <span class="s">"-s"</span><span class="p">,</span> <span class="s">"default"</span><span class="p">,</span> <span class="s">"-q"</span><span class="p">,</span> <span class="s">"--"</span><span class="p">,</span> <span class="s">"tool"</span><span class="p">]</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s">"stool"</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">flags</span> <span class="o">==</span> <span class="p">[</span><span class="s">"s"</span><span class="p">:</span> <span class="s">"default"</span><span class="p">,</span> <span class="s">"q"</span><span class="p">:</span> <span class="s">""</span><span class="p">]</span>
<span class="kt">CLI</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">parameters</span> <span class="o">==</span> <span class="p">[</span><span class="s">"init"</span><span class="p">,</span> <span class="s">"tool"</span><span class="p">]</span>
</code></pre>
<h2 id='instalation' class='heading'>Instalation</h2>

<p>To install CommandLineAPI for use in a Swift Package Manager powered tool, add CommandLineAPI as a dependency to your <code>Package.swift</code> file. For more information, please see the <a href="https://github.com/apple/swift-package-manager/tree/master/Documentation">Swift Package Manager documentation</a>.</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/Hejki/CommandLineAPI"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.2.0"</span><span class="p">)</span>
</code></pre>
<h2 id='alternatives' class='heading'>Alternatives</h2>
<h4 id='for-path-handling' class='heading'>for path handling</h4>

<ul>
<li><a href="https://github.com/mxcl/Path.swift">Path.swift</a> by Max Howell</li>
<li><a href="https://github.com/dduan/Pathos">Pathos</a> by Daniel Duan</li>
<li><a href="https://github.com/kylef/PathKit">PathKit</a> by Kyle Fuller</li>
<li><a href="https://github.com/JohnSundell/Files">Files</a> by John Sundell</li>
<li><a href="https://github.com/apple/swift-package-manager">Utility</a> by Apple</li>
</ul>
<h4 id='for-command-line-tools' class='heading'>for command line tools</h4>

<ul>
<li><a href="https://github.com/nsomar/Swiftline">Swiftline</a> by Omar Abdelhafith</li>
<li><a href="https://github.com/kylef/Commander">Commander</a> by Kyle Fuller</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="https://github.com/Hejki" target="_blank" rel="external">Hejki</a>. All rights reserved. (Last updated: 2019-11-18)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.12.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
